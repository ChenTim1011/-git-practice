## 第九周上課

### 1. 壓力測試的公平性
- **壓力測試**注意背後邏輯。有些網路上的測試結果可能**不公平**，比如將A程式語言擅長的領域和B程式語言不擅長的領域相比。
- **範例**：之前測試PHP和Node.js在回傳字串速度的比較，但這不代表其他情境下的運行結果也相同。
- **成本考量**：符合實際條件的測試成本高，需找平衡點。

### 2. 負載平衡器 (Load Balancer)
- 負載平衡器不一定會加快系統運行速度，因為增加一層會引入額外延遲，因此要根據實際**使用情境**來評估其效用。

### 3. Node.js執行機制
- **Return行為**：在程式執行時，Return即為對stack進行pop操作。
- **Closure特性**：Node.js中的閉包（Closure）特別之處在於，pop後變數依然保留。
- **非同步行為**：`setTimeout`會被放進後台執行，透過事件循環(Event Loop)來管理。
    - **Task Queue**：`setTimeout`等非同步操作會被推入Task Queue，當stack為空時，才會由Event Loop將Task Queue中的任務出列 (enqueue) 並執行。

#### 範例：Node.js的訂單系統類比
- 如麥當勞的點餐流程，每一個非同步操作會等待前一個完成，SetTimeout的時間也可能因為排隊造成誤差。

### 4. NPM、Yarn及Package.json運作方式
- **NPM安裝流程**：當進行`npm install`時，package.json中的模組會進行巢狀安裝。
- **Yarn與NPM差異**：Yarn能加速下載並透過lock文件確保版本一致性。
- **Package.json的版本控制**：
    - `^`表示允許次版升級（例如：`^1.2.3`可能安裝到`1.2.4`）。
    - `~`表示允許小版升級。
    - **建議**：若需嚴格指定版本，移除`^`符號以確保安裝特定版本，尤其在升級過程中。

### 5. 升版的風險
- **大版本跨越**：直接升級大版本可能造成不可逆的系統錯誤，甚至無法降級。

- **業界實例**：一般業界會逐步升級測試版與生產版，不會直接升級至最新大版本。

### 6. Git底層與工程師學習持續性
- 工程師需了解底層運作才能進行改進，學習底層知識的累積會拉開技術差距。挑選感興趣的技術，累積知識，才能在未來取得競爭優勢。

---

## 技術延伸解釋

### 1. 壓力測試的公平性
- **什麼是壓力測試？**：壓力測試是模擬系統在高負載下的運行，以檢測系統性能和可靠性。
- **公平性的重要性**：選擇公平的指標和方法，避免測試結果的偏差，比如避免將PHP和Node.js用於不同擅長領域的比較。

### 2. Event Loop與Task Queue
- **Event Loop 作用**：是Node.js管理非同步操作的核心機制。當stack空閒時，Event Loop會從Task Queue中取出任務執行。
- **Task Queue 的優化**：Event Loop的存在允許非同步IO操作，例如文件讀寫、HTTP請求等不會阻塞主執行緒。

### 3. 閉包 (Closure) 的特性
- **閉包的優勢**：閉包使變數不會因為函數返回而被釋放，在Node.js開發中常被用於保持變數狀態或封裝私有資料。
  
### 4. 負載平衡器
- **什麼是負載平衡器**：在高並行環境中分散請求，提升系統穩定性。
- **缺點**：引入額外的延遲，對於低延遲要求高的系統需小心評估是否適合。

### 5. NPM、Yarn與版本控制
- **NPM與Yarn比較**：NPM為Node.js的包管理工具，Yarn則強調安裝速度和一致性。
- **版本號的影響**：了解Package.json的`^`和`~`的用法，避免升級過程中的意外錯誤。

### 6. Kubernetes的升級問題
- **升級風險**：跨越多個大版本的升級風險較高，建議在升級前做充分的測試。
- **驗屍報告**：記錄錯誤訊息及解決方法有助於未來的系統除錯與改進。

### 7. 工程師持續學習的必要性
- **底層知識的重要性**：瞭解底層運作可以避免開發過程中走彎路。工程師可以針對自身興趣深入探索，為長期職業發展奠定基礎。