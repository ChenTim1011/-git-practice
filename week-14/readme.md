# 20241212 W14 - 個人作業 9

##　個人作業 9: 文章閱讀 Scale From Zero To Millions Of Users

 
[Scale From Zero To Millions Of Users](https://bytebytego.com/courses/system-design-interview/scale-from-zero-to-millions-of-users)


### **1. 單一伺服器設置**
- 初始系統架構將所有功能（網頁應用、資料庫、快取等）運行在一台伺服器上。
- 請求流程包括DNS解析、HTTP 請求發送至伺服器，伺服器返回 HTML 或 JSON 回應。
- 流量來源主要為網頁應用和移動應用。

### **2. 擴展至多伺服器架構**
- 隨著用戶增長，將網頁/移動流量與資料庫分離，使用多台伺服器以獨立擴展。
- **資料庫選擇**：
  - **關聯型資料庫（RDBMS）**：適合結構化資料和複雜查詢，如 MySQL、PostgreSQL。
  - **非關聯型資料庫（NoSQL）**：適合低延遲、大規模資料儲存或非結構化資料，如 Cassandra、DynamoDB。

### **3. 垂直擴展 vs 水平擴展**
- **垂直擴展（Scale Up）**：增加單一伺服器的資源（CPU、RAM），適合低流量，但有硬體限制且缺乏冗餘。
- **水平擴展（Scale Out）**：增加更多伺服器來分擔負載，具有更好的彈性和容錯能力，適合大規模應用。
- 
### **4. 負載平衡器**
- 使用負載平衡器將流量均勻分配到多個伺服器，提高可用性和容錯性。
- 當伺服器故障或流量增加時，自動調整流量分配。

### **5. 資料庫複製**
- **主從架構**：主資料庫處理寫操作，從資料庫處理讀操作，提高讀取性能和系統可靠性。
- 提供高可用性和資料冗餘，防止資料庫故障導致系統停擺。

### **6. 快取（Cache）**
- 引入快取層（如Memcached或Redis）來儲存常見查詢結果，減少對資料庫的頻繁訪問，提升系統性能。
- 設計合理的快取策略和過期策略，確保資料一致性和快取命中率。

### **7. 內容傳遞網路（CDN）**
- 使用CDN分發靜態內容（圖片、CSS、JavaScript等），縮短用戶與伺服器之間的距離，提升載入速度和用戶體驗。
- 設置適當的快取過期時間，並考慮CDN故障的 rollback 機制。

### **8. 無狀態的網頁層**
- 將使用者會話資料從網頁伺服器中移出，儲存在共享的持久性儲存中（如NoSQL），實現無狀態網頁層。
- 這樣任何伺服器都能處理任意用戶的請求，提升系統的彈性和擴展性。

### **9. 多資料中心**
- 部署多個資料中心，使用GeoDNS將用戶流量路由到最近的資料中心，提升全球用戶的可用性和體驗。
- 解決流量重定向、資料同步和一致性等技術挑戰，確保資料中心間的資料一致性和系統穩定性。

### **10. Message queue**
- 使用 message queue（如RabbitMQ、Kafka）實現系統組件之間的非同步通訊，解耦系統，提高可擴展性和可靠性。
- 例如，將耗時的任務（如照片處理）通過消息隊列進行非同步處理，讓生產者和消費者可以獨立擴展。

### **11. 紀錄、Metric和自動化**
- **紀錄**：集中化管理錯誤紀錄，便於快速識別和解決問題。
- **Metric**：收集主機層級、聚合層級和業務層級的 Metric，監控系統健康狀態。
- **自動化**：實現持續集成和自動化部署，提高開發效率和系統穩定性。

### **12. 資料庫擴展**
- **垂直擴展**：增加單一資料庫伺服器的資源，但有硬體限制和高成本。
- **水平擴展（分片）**：將資料庫拆分為多個分片，每個分片儲存不同部分的資料，提升擴展性和管理性。
  - **挑戰**：重新分片、熱門鍵問題和跨分片連接操作，需要合理設計分片鍵和資料結構。

### **13. 支援數百萬用戶及以上**
- 系統擴展是一個迭代過程，需要不斷優化和採用新技術。
- 最終策略包括保持網頁層無狀態、建立各層冗餘、廣泛使用快取、支援多資料中心、使用CDN、分片擴展資料層、拆分為獨立服務以及監控和自動化工具的應用。